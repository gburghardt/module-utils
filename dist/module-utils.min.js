/*! module-utils 2014-05-07 */
;
/*! module-utils 2014-05-07 */
(function(d){var e=d.Object.prototype.toString;function c(h){return e.call(h)==="[object Array]"}function g(k,h,j){for(var i in k){if(k.hasOwnProperty(i)&&(!j||!h.hasOwnProperty(i))){h[i]=k[i]}}}function b(h,l){if(!l){throw new Error("Missing required argument: Klass")}h=c(h)?h:[h];var j=0,k=h.length;for(j;j<k;j++){if(!h[j]){throw new Error("Mixin at index "+j+" is null or undefined")}l.include(h[j])}}function a(h){var i,j=this;if(h.self){g(h.self,j,true)}if(h.prototype){g(h.prototype,j.prototype,true)}if(h.includes){b(h.includes,j)}if(h.included){h.included(j)}h=null}function f(o){o=o||{};var m,l,n,k=this;var j=function j(){this.initialize.apply(this,arguments)};g(k,j);if(o.self){g(o.self,j)}j.prototype=Object.create(k.prototype);if(o.prototype){g(o.prototype,j.prototype)}if(o.includes){b(o.includes,j)}j.prototype.initialize=j.prototype.initialize||function h(){};j.prototype.constructor=j;k=o=null;return j}if(!d.Function.prototype.include){d.Function.prototype.include=a}if(!d.Function.prototype.extend){if(d.Object.extend){d.Object._extend=f}d.Function.prototype.extend=f}})(this);function Callbacks(b,a){if(b){this.context=b;this.types=a||{}}}Callbacks.prototype={context:null,types:null,destructor:function destructor(){this.context=this.types=null},add:function add(a,b){if(!this.types[a]){this.types[a]=[]}this.types[a].push(b);return this},execute:function execute(b){if(!this.types[b]){return true}var a=Array.prototype.slice.call(arguments,1,arguments.length);var f,c=0,d=this.types[b].length;var e=true;for(c;c<d;c++){f=this.types[b][c];if(!this.context[f]){throw new Error("No callback method found: "+f)}if(this.context[f].apply(this.context,a)===false){e=false;break}}return e},remove:function remove(b,e){if(!this.types[b]){return}var c=0,d=this.types[b].length,a;for(c;c<d;c++){if(e===this.types[b][c]){this.types[b].splice(c,1);break}}return this}};Callbacks.Utils={self:{addCallback:function addCallback(a,b){this.prototype.callbacks=this.prototype.callbacks||{};if(!this.prototype.callbacks[a]){this.prototype.callbacks[a]=[]}else{if(!this.prototype.callbacks[a] instanceof Array){this.prototype.callbacks[a]=[this.prototype.callbacks[a]]}}this.prototype.callbacks[a].push(b);return this}},prototype:{callbacks:null,initCallbacks:function initCallbacks(a){if(!this.hasOwnProperty("callbacks")){this.callbacks=new Callbacks(this)}if(a){this.callbacks.types=a}},destroyCallbacks:function destroyCallbacks(){if(this.callbacks){this.callbacks.destructor();this.callbacks=null}}}};Module.Utils={include:function(a){if(Module.Base){Module.Base.include(a)}}};Module.Utils.Bootstrap={includes:[Callbacks.Utils],included:function(d){var c=d.prototype;if(c.initialize!==Module.Utils.Bootstrap.prototype.initialize){c._originalInitialize=c.initialize||function b(){};c.initialize=Module.Utils.Bootstrap.prototype.initialize}else{c.initialize=function b(){}}if(c.init!==Module.Utils.Bootstrap.prototype.init){c._originalInit=c.init||function a(){};c.init=Module.Utils.Bootstrap.prototype.init}else{c.init=function a(){}}if(c.destructor!==Module.Utils.Bootstrap.prototype.destructor){c._originalDestructor=c.destructor||function e(){};c.destructor=Module.Utils.Bootstrap.prototype.destructor}else{c.destructor=function e(){}}c=null},prototype:{initialize:function(){this._originalInitialize.call(this);this.setOptions(this.mergeProperty("options"))},init:function(a,b){this._originalInit.call(this,a,b);this.initCallbacks(this.mergeProperty("callbacks"));this.callbacks.execute("beforeReady");this._ready();this.callbacks.execute("afterReady");if(!this._isLoading){this._loaded()}opts=null;return this},destructor:function(a){this.callbacks.execute("destroy",a);this.destroyCallbacks();this._originalDestructor.call(this,a)},_ready:function(){},cancel:function(b,a,c){b.stop();this.destructor();b=a=c=null}}};Module.Utils.include(Module.Utils.Bootstrap);Module.Utils.PropertyCache={self:{cache:null,fromCache:function(){var d=Object.prototype.toString,a=function(e){return d.call(e)==="[object Array]"};function c(f,m,j,e){var g,l,h,k;for(g in m){if(m.hasOwnProperty(g)){l=m[g];if(a(l)){if(!f[g]){f[g]=l}else{f[g]=f[g]||[];for(h=0,k=l.length;h<k;h++){if(f[g].indexOf(l[h])<0){f[g].unshift(l[h])}}}}else{if(!f.hasOwnProperty(g)){f[g]=m[g]}}}}}return function b(g,e,j,f){this.cache=this.cache||{};if(this.cache[g]){return this.cache[g]}if(!j){j=c;f=this}else{f=f||null}var h=this.prototype,i={};while(h){if(h.hasOwnProperty(e)&&h[e]){j.call(f,i,h[e],g,this)}h=h.__proto__}return(this.cache[g]=i)}}()},prototype:{mergeProperty:function mergeProperty(a,d,c){var b=this.guid?this.guid+"."+a:a;return this.constructor.fromCache(b,a,d,c)}}};Module.Utils.include(Module.Utils.PropertyCache);Module.Utils.Rendering={included:function(a){a.addCallback("destroy","_destroyRenderingEngine")},prototype:{renderingEngine:null,_destroyRenderingEngine:function _destroyRenderingEngine(){this.renderingEngine=null},render:function render(b,c,a){return this.renderingEngine.render(b,c,a)}}};Module.Utils.include(Module.Utils.Rendering);
/*! module-utils 2014-05-07 */
;function ElementStore(){}ElementStore.prototype={_cache:null,config:null,_document:null,returnNative:false,_root:null,constructor:ElementStore,init:function init(a){if(!a){throw new Error("Missing required argument: root")}this.config=this.config||{elements:{},collections:{}};this._cache={};this.setRoot(a);if(!this.createElement){this.createElement=this._createElement}if(!this.parseHTML){this.parseHTML=this._parseHTML}if(!this.querySelector){this.querySelector=this._querySelector}if(!this.querySelectorAll){this.querySelectorAll=this._querySelectorAll}this.eagerLoad();return this},destructor:function destructor(){if(this._cache){this.clearCache();this._cache=null}this.config=this._root=this._document=null},clearCache:function clearCache(){var a;for(a in this._cache){if(this._cache.hasOwnProperty(a)){this._cache[a]=null}}return this},_createElement:function _createElement(a){return this._document.createElement(a)},eagerLoad:function eagerLoad(){var b,a;for(b in this.config.elements){if(this.config.elements.hasOwnProperty(b)){a=this.config.elements[b];if(a.eager&&!a.nocache){this._cache[b]=this.getElement(b)}}}for(b in this.config.collections){if(this.config.collections.hasOwnProperty(b)){a=this.config.collections[b];if(a.eager&&!a.nocache){this.getCollection(b)}}}return this},get:function get(a){return this.getElement(a)||this.getCollection(a)||null},getCollection:function getCollection(a){var b;if(!this.config.collections[a]){b=null}else{if(this._cache[a]){b=this._cache[a]}else{if(this.config.collections[a].selector){b=this.querySelectorAll(this.config.collections[a].selector);if(!this.config.collections[a].nocache){this._cache[a]=b}}else{throw new Error('Missing required config "selector" for collection '+a)}}}return b},getElement:function getElement(b){var a;if(!this.config.elements[b]){a=null}else{if(this._cache[b]){a=this._cache[b]}else{if(this.config.elements[b].selector){a=this.querySelector(this.config.elements[b].selector);if(!this.config.elements[b].nocache){this._cache[b]=a}}else{throw new Error('Missing required config "selector" for element '+b)}}}return a},isCollection:function isCollection(a){return this.config.collections.hasOwnProperty(a)},isElement:function isElement(a){return this.config.elements.hasOwnProperty(a)},keys:function keys(){var b=[],a;for(a in this.config.elements){if(this.config.elements.hasOwnProperty(a)){b.push(a)}}for(a in this.config.collections){if(this.config.collections.hasOwnProperty(a)){b.push(a)}}return b},_mergeConfigs:function _mergeConfigs(a,c,b){for(key in c){if(c.hasOwnProperty(key)&&(a[key]===undefined||!b)){a[key]=c[key]}}},_parseHTML:function _parseHTML(b){b=b.replace(/^\s+|\s+$/g,"");var d=this.createElement("div");d.innerHTML=b;var c=[],a=d.childNodes.length;while(a--){c.push(d.childNodes[a]);d.removeChild(d.childNodes[a])}d=null;return c},setConfig:function setConfig(b,a){this.config=this.config||{elements:{},collections:{}};if(b.elements){this._mergeConfigs(this.config.elements,b.elements,a)}if(b.collections){this._mergeConfigs(this.config.collections,b.collections,a)}return this},setRoot:function setRoot(a){this.clearCache();this._root=a;this._document=this._root.nodeName==="#document"?this._root:this._root.ownerDocument;return this},toString:function toString(){return"[object ElementStore]"},_querySelector:function _querySelector(a,b){return(b||this._root).querySelector(a)},_querySelectorAll:function _querySelectorAll(a,b){return(b||this._root).querySelectorAll(a)}};ElementStore.Utils={prototype:{elementStore:{},destroyElementStore:function destroyElementStore(){if(this.elementStore){this.elementStore.destructor();this.elementStore=null}},initElementStore:function initElementStore(a){if(!this.hasOwnProperty("elementStore")){this.elementStore=new ElementStore()}this._compileElementStore();this._initGetters();this.elementStore.init(a)},_initGetters:function _initGetters(){if(this.__proto__.hasOwnProperty("__elementStoreGettersCreated__")){return}var b,a,d=this.__proto__;var e=this.elementStore.config.elements;var c=this.elementStore.config.collections;if(!this.createElementGetter){this.createElementGetter=this._createElementGetter}if(!this.createCollectionGetter){this.createCollectionGetter=this._createCollectionGetter}for(b in e){if(e.hasOwnProperty(b)){if(!d[b]){a=b}else{if(!d[b+"Element"]){a=b+"Element"}else{throw new Error("Cannot create element getter: "+b)}}this.createElementGetter(b,a)}}for(b in c){if(c.hasOwnProperty(b)){if(!d[b]){a=b}else{if(!d[b+"Collection"]){a=b+"Collection"}else{throw new Error("Cannot create collection getter: "+b)}}this.createCollectionGetter(b,a)}}d.__elementStoreGettersCreated__=true;e=c=d=null},clearElementStoreCache:function clearElementStoreCache(){this.elementStore.clearCache()},collection:function collection(a){return this.elementStore.getCollection(a)},_compileElementStore:function _compileElementStore(){if(this.__proto__.hasOwnProperty("_compiledElementStore")){this.elementStore.setConfig(this.__proto__._compiledElementStore);return}var a=this.__proto__;while(a){if(a.hasOwnProperty("elementStore")){this.elementStore.setConfig(a.elementStore,true)}a=a.__proto__}this.__proto__._compiledElementStore=this.elementStore.config},_createCollectionGetter:function _createCollectionGetter(c,b){var a=function d(){return this.elementStore.getCollection(c)};this.__proto__[b]=a},_createElementGetter:function _createElementGetter(c,b){var a=function d(){return this.elementStore.getElement(c)};this.__proto__[b]=a},element:function element(a){return this.elementStore.getElement(a)}}};Module.Utils.ElementStore={includes:[ElementStore.Utils],included:function(a){a.addCallback("beforeReady","_initElementStore");a.addCallback("destroy","destroyElementStore")},prototype:{_initElementStore:function _initElementStore(){this.initElementStore(this.element)}}};Module.Utils.include(Module.Utils.ElementStore);
/*! module-utils 2014-05-07 */
(function(){function b(f,e){if(e.self){d(e.self,f,true)}if(e.prototype){d(e.prototype,f.prototype,true)}if(e.included){e.included(f)}}function d(i,e,h){var f,g;for(f in i){if(i.hasOwnProperty(f)&&(!h||e[f]===g)){e[f]=i[f]}}i=e=null}var c={setup:function a(e){if(c.ApplicationEvents){b(e,c.ApplicationEvents);if(c.Notifications){b(e,c.Notifications)}}}};window.Beacon=c})();Beacon=(function(h){function b(){this._subscribers={}}b.prototype={_subscribers:null,constructor:b,destructor:function c(){if(!this._subscribers){return}var n=this._subscribers,l,k,j,m;for(k in n){if(n.hasOwnProperty(k)){for(j=0,m=n[k].length;j<m;j++){l=n[k][j];l.callback=l.context=null}n[k]=null}}l=n=this._subscribers=null},_dispatchEvent:function g(n,o,p){var l,j,k=0,m=p.length;for(k;k<m;k++){l=p[k];if(l.type==="function"){j=l.callback.call(l.context,n,o)}else{if(l.type==="string"){j=l.context[l.callback](n,o)}}if(j===false){break}}p=l=n=o=null;return j!==false},publish:function e(j,k,l){if(!this._subscribers[j]){return true}var i=this._dispatchEvent(k,l,this._subscribers[j]);k=l=null;return i},subscribe:function a(k,j,m){var i=typeof j;var l=typeof m;this._subscribers[k]=this._subscribers[k]||[];if(i==="function"){this._subscribers[k].push({context:null,callback:j,type:"function"})}else{if(i==="object"){if(l==="string"&&typeof j[m]!=="function"){throw new Error("Cannot subscribe to "+k+" because "+m+" is not a function")}this._subscribers[k].push({context:j||null,callback:m,type:l})}}},unsubscribe:function f(m,l,q){if(this._subscribers[m]){var j=typeof l,p=typeof q,o=this._subscribers[m],k=o.length,n;if(j==="function"){q=l;l=null;p="function"}else{if(j==="object"&&p==="undefined"){p="any"}}while(k--){n=o[k];if((p==="any"&&n.context===l)||(n.type===p&&n.context===l&&n.callback===q)){o.splice(k,1)}}o=n=null}l=q=null},unsubscribeAll:function d(k){var l,j,m;for(l in this._subscribers){if(this._subscribers.hasOwnProperty(l)){m=this._subscribers[l];j=m.length;while(j--){if(m[j].context===k){m.splice(j,1)}}}}k=m=null}};h.Dispatcher=b;return h})(window.Beacon||{});Beacon=(function(f){var h={eventDispatcher:null,self:{getEventDispatcher:function b(){if(!f.ApplicationEvents.eventDispatcher){f.ApplicationEvents.eventDispatcher=new f.Dispatcher()}return f.ApplicationEvents.eventDispatcher},publish:function d(i,j,k){return this.getEventDispatcher().publish(i,j,k)},subscribe:function a(i,j,k){this.getEventDispatcher().subscribe(i,j,k)},unsubscribe:function e(i,j,k){this.getEventDispatcher().unsubscribe(i,j,k)}},prototype:{eventDispatcher:null,_initApplicationEvents:function g(){if(!this.hasOwnProperty("eventDispatcher")){this.eventDispatcher=this.constructor.getEventDispatcher()}},_destroyApplicationEvents:function c(){if(this.eventDispatcher){this.eventDispatcher.unsubscribe(this)}},publish:function d(i,j){return this.eventDispatcher.publish(i,this,j)},subscribe:function a(i,j,k){this.eventDispatcher.subscribe(i,j,k);return this},unsubscribe:function e(i,j,k){this.eventDispatcher.unsubscribe(i,j,k);return this}}};f.ApplicationEvents=h;return f})(window.Beacon||{});Beacon=(function(a){var g=0;var h={self:{addNotifications:function b(n){var m,l=this.prototype.notifications||{};for(m in n){if(n.hasOwnProperty(m)){if(l[m]){l[m]=(l[m] instanceof Array)?l[m]:[l[m]]}else{l[m]=[]}l[m].push(n[m])}}this.prototype.notifications=l;l=n=null}},prototype:{_notificationDispatcher:null,_notificationId:null,_notificationIdPrefix:"notifications",notifications:null,_initNotifications:function d(){if(!this.__proto__.hasOwnProperty("_compiledNotifications")){this._compileNotifications()}this._initApplicationEvents();this._notificationId=g++;var m,n,o,l;for(m in this._compiledNotifications){if(this._compiledNotifications.hasOwnProperty(m)){l=this._compiledNotifications[m];for(n=0,o=l.length;n<o;n++){this.listen(m,this,l[n])}}}this._setUpNotifications()},_compileNotifications:function k(){var q={},m,n,p,l,o=this.__proto__;while(o){if(o.hasOwnProperty("notifications")&&o.notifications){l=o.notifications;for(m in l){if(l.hasOwnProperty(m)){q[m]=q[m]||[];l[m]=l[m] instanceof Array?l[m]:[l[m]];n=l[m].length;while(n--){q[m].unshift(l[m][n])}}}}o=o.__proto__}this.__proto__._compiledNotifications=q;o=l=q=null},_destroyNotifications:function f(){if(this._notificationDispatcher){this._notificationDispatcher.destructor();this._notificationDispatcher=null}},_setUpNotifications:function c(){},notify:function j(l,m){var n=this.publish(this._notificationIdPrefix+"."+this._notificationId+"."+l,m);m=null;return n},listen:function e(m,l,n){this.subscribe(this._notificationIdPrefix+"."+this._notificationId+"."+m,l,n);l=n=null;return this},ignore:function i(m,l,n){this.unsubscribe(this._notificationIdPrefix+"."+this._notificationId+"."+m,l,n);l=n=null;return this}}};a.Notifications=h;return a})(window.Beacon||{});Module.Utils.Events={included:function(a){Beacon.setup(a);a.addCallback("beforeReady","_initApplicationEvents");if(Beacon.Notifications){a.addCallback("beforeReady","_initNotifications")}}};Module.Utils.include(Module.Utils.Events);