/*! module-utils 2014-05-07 */
(function(d){var e=d.Object.prototype.toString;function c(h){return e.call(h)==="[object Array]"}function g(k,h,j){for(var i in k){if(k.hasOwnProperty(i)&&(!j||!h.hasOwnProperty(i))){h[i]=k[i]}}}function b(h,l){if(!l){throw new Error("Missing required argument: Klass")}h=c(h)?h:[h];var j=0,k=h.length;for(j;j<k;j++){if(!h[j]){throw new Error("Mixin at index "+j+" is null or undefined")}l.include(h[j])}}function a(h){var i,j=this;if(h.self){g(h.self,j,true)}if(h.prototype){g(h.prototype,j.prototype,true)}if(h.includes){b(h.includes,j)}if(h.included){h.included(j)}h=null}function f(o){o=o||{};var m,l,n,k=this;var j=function j(){this.initialize.apply(this,arguments)};g(k,j);if(o.self){g(o.self,j)}j.prototype=Object.create(k.prototype);if(o.prototype){g(o.prototype,j.prototype)}if(o.includes){b(o.includes,j)}j.prototype.initialize=j.prototype.initialize||function h(){};j.prototype.constructor=j;k=o=null;return j}if(!d.Function.prototype.include){d.Function.prototype.include=a}if(!d.Function.prototype.extend){if(d.Object.extend){d.Object._extend=f}d.Function.prototype.extend=f}})(this);function Callbacks(b,a){if(b){this.context=b;this.types=a||{}}}Callbacks.prototype={context:null,types:null,destructor:function destructor(){this.context=this.types=null},add:function add(a,b){if(!this.types[a]){this.types[a]=[]}this.types[a].push(b);return this},execute:function execute(b){if(!this.types[b]){return true}var a=Array.prototype.slice.call(arguments,1,arguments.length);var f,c=0,d=this.types[b].length;var e=true;for(c;c<d;c++){f=this.types[b][c];if(!this.context[f]){throw new Error("No callback method found: "+f)}if(this.context[f].apply(this.context,a)===false){e=false;break}}return e},remove:function remove(b,e){if(!this.types[b]){return}var c=0,d=this.types[b].length,a;for(c;c<d;c++){if(e===this.types[b][c]){this.types[b].splice(c,1);break}}return this}};Callbacks.Utils={self:{addCallback:function addCallback(a,b){this.prototype.callbacks=this.prototype.callbacks||{};if(!this.prototype.callbacks[a]){this.prototype.callbacks[a]=[]}else{if(!this.prototype.callbacks[a] instanceof Array){this.prototype.callbacks[a]=[this.prototype.callbacks[a]]}}this.prototype.callbacks[a].push(b);return this}},prototype:{callbacks:null,initCallbacks:function initCallbacks(a){if(!this.hasOwnProperty("callbacks")){this.callbacks=new Callbacks(this)}if(a){this.callbacks.types=a}},destroyCallbacks:function destroyCallbacks(){if(this.callbacks){this.callbacks.destructor();this.callbacks=null}}}};Module.Utils={include:function(a){if(Module.Base){Module.Base.include(a)}}};Module.Utils.Bootstrap={includes:[Callbacks.Utils],included:function(d){var c=d.prototype;if(c.initialize!==Module.Utils.Bootstrap.prototype.initialize){c._originalInitialize=c.initialize||function b(){};c.initialize=Module.Utils.Bootstrap.prototype.initialize}else{c.initialize=function b(){}}if(c.init!==Module.Utils.Bootstrap.prototype.init){c._originalInit=c.init||function a(){};c.init=Module.Utils.Bootstrap.prototype.init}else{c.init=function a(){}}if(c.destructor!==Module.Utils.Bootstrap.prototype.destructor){c._originalDestructor=c.destructor||function e(){};c.destructor=Module.Utils.Bootstrap.prototype.destructor}else{c.destructor=function e(){}}c=null},prototype:{initialize:function(){this._originalInitialize.call(this);this.setOptions(this.mergeProperty("options"))},init:function(a,b){this._originalInit.call(this,a,b);this.initCallbacks(this.mergeProperty("callbacks"));this.callbacks.execute("beforeReady");this._ready();this.callbacks.execute("afterReady");if(!this._isLoading){this._loaded()}opts=null;return this},destructor:function(a){this.callbacks.execute("destroy",a);this.destroyCallbacks();this._originalDestructor.call(this,a)},_ready:function(){},cancel:function(b,a,c){b.stop();this.destructor();b=a=c=null}}};Module.Utils.include(Module.Utils.Bootstrap);Module.Utils.PropertyCache={self:{cache:null,fromCache:function(){var d=Object.prototype.toString,a=function(e){return d.call(e)==="[object Array]"};function c(f,m,j,e){var g,l,h,k;for(g in m){if(m.hasOwnProperty(g)){l=m[g];if(a(l)){if(!f[g]){f[g]=l}else{f[g]=f[g]||[];for(h=0,k=l.length;h<k;h++){if(f[g].indexOf(l[h])<0){f[g].unshift(l[h])}}}}else{if(!f.hasOwnProperty(g)){f[g]=m[g]}}}}}return function b(g,e,j,f){this.cache=this.cache||{};if(this.cache[g]){return this.cache[g]}if(!j){j=c;f=this}else{f=f||null}var h=this.prototype,i={};while(h){if(h.hasOwnProperty(e)&&h[e]){j.call(f,i,h[e],g,this)}h=h.__proto__}return(this.cache[g]=i)}}()},prototype:{mergeProperty:function mergeProperty(a,d,c){var b=this.guid?this.guid+"."+a:a;return this.constructor.fromCache(b,a,d,c)}}};Module.Utils.include(Module.Utils.PropertyCache);Module.Utils.Rendering={included:function(a){a.addCallback("destroy","_destroyRenderingEngine")},prototype:{renderingEngine:null,_destroyRenderingEngine:function _destroyRenderingEngine(){this.renderingEngine=null},render:function render(b,c,a){return this.renderingEngine.render(b,c,a)}}};Module.Utils.include(Module.Utils.Rendering);